(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{106:function(e,n,t){"use strict";t.d(n,"a",(function(){return u})),t.d(n,"b",(function(){return b}));var r=t(0),a=t.n(r);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=a.a.createContext({}),p=function(e){var n=a.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},u=function(e){var n=p(e.components);return a.a.createElement(l.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},d=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(t),d=r,b=u["".concat(o,".").concat(d)]||u[d]||m[d]||i;return t?a.a.createElement(b,s(s({ref:n},l),{},{components:t})):a.a.createElement(b,s({ref:n},l))}));function b(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=d;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var l=2;l<i;l++)o[l]=t[l];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},99:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"metadata",(function(){return s})),t.d(n,"toc",(function(){return c})),t.d(n,"default",(function(){return p}));var r=t(3),a=t(7),i=(t(0),t(106)),o={title:"Basic Premake Extension"},s={unversionedId:"Basic-Premake-Extension",id:"version-4.x/Basic-Premake-Extension",isDocsHomePage:!1,title:"Basic Premake Extension",description:"Some things you should know before you digging into the Premake internals, in no particular order:",source:"@site/versioned_docs/version-4.x/Basic-Premake-Extension.md",slug:"/Basic-Premake-Extension",permalink:"/premake-core/docs/4.x/Basic-Premake-Extension",editUrl:"https://github.com/premake/premake-core/edit/master/website/versioned_docs/version-4.x/Basic-Premake-Extension.md",version:"4.x",sidebar:"version-4.x/mainSidebar",previous:{title:"Extending Premake",permalink:"/premake-core/docs/4.x/Extending-Premake"},next:{title:"Create A New Action",permalink:"/premake-core/docs/4.x/Create-A-New-Action"}},c=[{value:"Managing script files",id:"managing-script-files",children:[]},{value:"Testing",id:"testing",children:[]},{value:"Namespaces",id:"namespaces",children:[]},{value:"And finally...",id:"and-finally",children:[]}],l={toc:c};function p(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("p",null,Object(i.b)("em",{parentName:"p"},"Some things you should know before you digging into the Premake internals, in no particular order:")),Object(i.b)("h2",{id:"managing-script-files"},"Managing script files"),Object(i.b)("p",null,"Before you begin, you should be able to ",Object(i.b)("a",{parentName:"p",href:"Building_Premake"},"build and run the debug configuration of Premake"),". This will save you the trouble of embedding the scripts and recompiling with each change, and will greatly speed up development."),Object(i.b)("p",null,"When you have completed your changes and are ready to roll them out, note that you must run ",Object(i.b)("inlineCode",{parentName:"p"},"premake4 embed")," and recompile in order to see your changes in the release build of Premake. Debug builds load the scripts dynamically at startup and so can skip this step."),Object(i.b)("p",null,"Premake knows which scripts to load and run by reading the file ",Object(i.b)("inlineCode",{parentName:"p"},"src/_manifest.lua"),". Any new script file you create must be listed in the manifest if you want it to run. This is a common mistake; I still make it myself every once in a while."),Object(i.b)("p",null,"The command ",Object(i.b)("inlineCode",{parentName:"p"},"premake4 embed")," copies all of the scripts listed in the manifest into static C buffers in the file ",Object(i.b)("inlineCode",{parentName:"p"},"src/host/scripts.c"),", which then gets compiled into the final executable. This is how I can ship a single binary, rather than the whole source tree."),Object(i.b)("h2",{id:"testing"},"Testing"),Object(i.b)("p",null,"There is a fairly comprehensive set of automated tests in the ",Object(i.b)("inlineCode",{parentName:"p"},"tests/")," folder. Create a debug build of Premake and then, in this tests directory, run the command:"),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre"},"../bin/debug/premake4 test\n")),Object(i.b)("p",null,"Or, if you're in a POSIX environment, run the ",Object(i.b)("inlineCode",{parentName:"p"},"./test")," shell script. I am using my own homegrown testing framework, which is defined in ",Object(i.b)("inlineCode",{parentName:"p"},"tests/testfx.lua"),". You can add new test files in ",Object(i.b)("inlineCode",{parentName:"p"},"tests/premake4.lua"),"."),Object(i.b)("h2",{id:"namespaces"},"Namespaces"),Object(i.b)("p",null,"Lua allows the creation of namespaces (of a sort) by putting your functions into a table. This example creates a function ",Object(i.b)("inlineCode",{parentName:"p"},"bar")," in the namespace ",Object(i.b)("inlineCode",{parentName:"p"},"premake.foo"),"."),Object(i.b)("pre",null,Object(i.b)("code",{parentName:"pre",className:"language-lua"},"premake.foo = { }\n\nfunction premake.foo.bar()\n  -- do something useful\nend\n")),Object(i.b)("p",null,"I have begun moving all of Premake's internals into the ",Object(i.b)("em",{parentName:"p"},"premake")," namespace, but it is a work in progress."),Object(i.b)("h2",{id:"and-finally"},"And finally..."),Object(i.b)("p",null,"Finally, ",Object(i.b)("a",{parentName:"p",href:"https://groups.google.com/forum/#!forum/premake-development"},"post any questions you might have over in the forums")," and I will be delighted (yes, delighted) to help you out. Your questions will help me improve this documentation and Premake itself and are very much appreciated."))}p.isMDXComponent=!0}}]);